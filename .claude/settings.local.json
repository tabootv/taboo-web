{
  "permissions": {
    "allow": [
      "Bash(npx create-next-app@latest:*)",
      "Bash(npm install:*)",
      "Bash(curl:*)",
      "Bash(TOKEN=\"28639|AlS9QRBUqTE79gb0587A3f0ZPfWrKlqvtwmC0waT4b7ff985\")",
      "Bash(echo \"=== /api/home/banners ===\" curl -sk \"https://beta.taboo.tv/api/home/banners\" -H \"Authorization: Bearer $TOKEN\" -H \"Accept: application/json\")",
      "Bash(python3:*)",
      "Bash(echo \"=== /api/v2/shorts ===\" curl -sk \"https://beta.taboo.tv/api/v2/shorts?per_page=1\" -H \"Authorization: Bearer $TOKEN\" -H \"Accept: application/json\")",
      "Bash(npm run build:*)",
      "Bash(cat:*)",
      "Bash(grep:*)",
      "Bash(ls:*)",
      "Bash(find:*)",
      "Bash(lsof:*)",
      "Bash(xargs kill:*)",
      "Bash(rm:*)",
      "Bash(pkill:*)",
      "Bash(npm run dev:*)",
      "Bash(php artisan:*)",
      "Bash(TOKEN=\"28650|VGKmmKmFWUgWhKedimA75DMZK7hBdLcymuRdGgRV5f8d61e7\")",
      "Bash(kill:*)",
      "Bash(env)",
      "Bash(NEXT_PUBLIC_API_URL=https://app.taboo.tv/api npm run dev:*)",
      "Bash(npx tsc:*)",
      "Bash(NEXT_PUBLIC_API_URL=https://beta.taboo.tv/api npm run dev:*)",
      "Bash(API_KEY=\"hPq6CerLNVYlScmHTeplSbnze5IzlZ1x6aHUZ2WmvmY\")",
      "Bash(ACCOUNT_ID=\"1fw6tytr\":*)",
      "Bash(npx eslint:*)",
      "Bash(npx shadcn@latest add card:*)",
      "Bash(npx shadcn@latest add calendar:*)",
      "Bash(npx shadcn@latest add popover:*)",
      "Bash(npx shadcn@latest add chart:*)",
      "Bash(npx shadcn@latest add select:*)",
      "Bash(npx shadcn@latest init:*)",
      "Bash(xargs:*)",
      "Bash(test:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: implement Next.js middleware for server-side authentication\n\nReplace client-side authentication checks with centralized server-side\nmiddleware to improve security, performance, and user experience.\n\nKey changes:\n- Add middleware.ts with route protection and creator validation\n- Remove 20+ useEffect auth checks from components and layouts\n- Validate creator status server-side via /me endpoint \\(60s cache\\)\n- Preserve redirect URLs with validated ?redirect parameter\n- Clean up studio layout - remove all client-side auth logic\n- Fix subscription hook import alias \\(subscriptionsClient\\)\n\nBenefits:\n- No auth loading flashes for users\n- Server-side validation prevents bypassing\n- Centralized auth logic in single file\n- Redirect preservation maintains user intent\n- Open redirect protection for security\n\nRoutes protected:\n- All routes by default \\(except public: /sign-in, /sign-up, /plans\\)\n- Creator routes \\(/studio/*\\) require is_creator OR channel\n- Public routes accessible without authentication\n\nFiles modified:\n- Profile pages \\(3\\): page, edit, subscription\n- Content pages \\(3\\): page, create, edit\n- Videos/Shorts pages \\(8\\): CRUD operations\n- Studio layout \\(1\\): complete auth removal\n- Other pages \\(4\\): notifications, payment, checkout\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nrefactor: complete API migration and fix variable name collisions\n\nMigrate remaining files from legacy API to TanStack Query API and fix\ncritical variable naming issues caused by batch migration script.\n\nAPI Migration:\n- Complete migration from @/lib/api to @/api/client\n- Create 8 new API modules: comments, shorts, playlists, livechat,\n  clips, moderation, places, publicContent\n- Export all new clients and mutations/queries in index files\n- Migrate 20+ files to use new API clients\n- Update auth store to use authClient consistently\n\nVariable Name Collision Fixes:\n- Fix videoClient.map â†’ videos.map in featured.tsx, recommended.tsx\n- Fix creatorsClient.map â†’ creators.map in creators.tsx\n- Fix shortsClient â†’ shorts in shuffleShorts function\n- Fix seriesClient.length â†’ series.length in home-series.tsx\n- Fix p.videoClient.data â†’ p.videos?.data in use-playlist-videos.ts\n- Remove unused client imports across all affected files\n\nAPI Client Updates:\n- Add Record<string, unknown> index signature to filter interfaces\n- Fix import paths and type exports\n- Update subscriptionsClient usage consistently\n- Migrate stores \\(auth, shorts, live-chat\\) to new API\n\nComponent Updates:\n- Replace direct API calls with TanStack Query hooks\n- Update imports across 40+ component files\n- Fix home page components \\(featured, shorts, series, creators\\)\n- Update video/shorts action buttons and comment sections\n- Migrate community components to new API\n\nDocumentation & Config:\n- Update CLAUDE.md and DESIGN_SYSTEM.md\n- Remove deprecated TABOOTV_DESIGN_SYSTEM_REFERENCE.md\n- Update package.json and tsconfig.json\n- Add PROJECT_CONTEXT.md documentation\n\nFiles affected:\n- 8 new API client files created\n- 11 new mutation/query files created\n- 70+ files migrated and fixed\n- Variable collisions fixed in 6 critical files\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit:*)",
      "Bash(wc:*)",
      "Bash(diff:*)",
      "Bash(head:*)",
      "Bash(git ls-tree:*)",
      "Bash(npm run type-check:*)",
      "Bash(npm run lint:*)"
    ],
    "deny": [],
    "ask": []
  }
}
