{
  "permissions": {
    "allow": [
      "Bash(npx create-next-app@latest:*)",
      "Bash(npm install:*)",
      "Bash(curl:*)",
      "Bash(TOKEN=\"28639|AlS9QRBUqTE79gb0587A3f0ZPfWrKlqvtwmC0waT4b7ff985\")",
      "Bash(echo \"=== /api/home/banners ===\" curl -sk \"https://beta.taboo.tv/api/home/banners\" -H \"Authorization: Bearer $TOKEN\" -H \"Accept: application/json\")",
      "Bash(python3:*)",
      "Bash(echo \"=== /api/v2/shorts ===\" curl -sk \"https://beta.taboo.tv/api/v2/shorts?per_page=1\" -H \"Authorization: Bearer $TOKEN\" -H \"Accept: application/json\")",
      "Bash(npm run build:*)",
      "Bash(cat:*)",
      "Bash(grep:*)",
      "Bash(ls:*)",
      "Bash(find:*)",
      "Bash(lsof:*)",
      "Bash(xargs kill:*)",
      "Bash(rm:*)",
      "Bash(pkill:*)",
      "Bash(npm run dev:*)",
      "Bash(php artisan:*)",
      "Bash(TOKEN=\"28650|VGKmmKmFWUgWhKedimA75DMZK7hBdLcymuRdGgRV5f8d61e7\")",
      "Bash(kill:*)",
      "Bash(env)",
      "Bash(NEXT_PUBLIC_API_URL=https://app.taboo.tv/api npm run dev:*)",
      "Bash(npx tsc:*)",
      "Bash(NEXT_PUBLIC_API_URL=https://beta.taboo.tv/api npm run dev:*)",
      "Bash(API_KEY=\"hPq6CerLNVYlScmHTeplSbnze5IzlZ1x6aHUZ2WmvmY\")",
      "Bash(ACCOUNT_ID=\"1fw6tytr\":*)",
      "Bash(npx eslint:*)",
      "Bash(npx shadcn@latest add card:*)",
      "Bash(npx shadcn@latest add calendar:*)",
      "Bash(npx shadcn@latest add popover:*)",
      "Bash(npx shadcn@latest add chart:*)",
      "Bash(npx shadcn@latest add select:*)",
      "Bash(npx shadcn@latest init:*)",
      "Bash(xargs:*)",
      "Bash(test:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: implement Next.js middleware for server-side authentication\n\nReplace client-side authentication checks with centralized server-side\nmiddleware to improve security, performance, and user experience.\n\nKey changes:\n- Add middleware.ts with route protection and creator validation\n- Remove 20+ useEffect auth checks from components and layouts\n- Validate creator status server-side via /me endpoint \\(60s cache\\)\n- Preserve redirect URLs with validated ?redirect parameter\n- Clean up studio layout - remove all client-side auth logic\n- Fix subscription hook import alias \\(subscriptionsClient\\)\n\nBenefits:\n- No auth loading flashes for users\n- Server-side validation prevents bypassing\n- Centralized auth logic in single file\n- Redirect preservation maintains user intent\n- Open redirect protection for security\n\nRoutes protected:\n- All routes by default \\(except public: /sign-in, /sign-up, /plans\\)\n- Creator routes \\(/studio/*\\) require is_creator OR channel\n- Public routes accessible without authentication\n\nFiles modified:\n- Profile pages \\(3\\): page, edit, subscription\n- Content pages \\(3\\): page, create, edit\n- Videos/Shorts pages \\(8\\): CRUD operations\n- Studio layout \\(1\\): complete auth removal\n- Other pages \\(4\\): notifications, payment, checkout\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nrefactor: complete API migration and fix variable name collisions\n\nMigrate remaining files from legacy API to TanStack Query API and fix\ncritical variable naming issues caused by batch migration script.\n\nAPI Migration:\n- Complete migration from @/lib/api to @/api/client\n- Create 8 new API modules: comments, shorts, playlists, livechat,\n  clips, moderation, places, publicContent\n- Export all new clients and mutations/queries in index files\n- Migrate 20+ files to use new API clients\n- Update auth store to use authClient consistently\n\nVariable Name Collision Fixes:\n- Fix videoClient.map â†’ videos.map in featured.tsx, recommended.tsx\n- Fix creatorsClient.map â†’ creators.map in creators.tsx\n- Fix shortsClient â†’ shorts in shuffleShorts function\n- Fix seriesClient.length â†’ series.length in home-series.tsx\n- Fix p.videoClient.data â†’ p.videos?.data in use-playlist-videos.ts\n- Remove unused client imports across all affected files\n\nAPI Client Updates:\n- Add Record<string, unknown> index signature to filter interfaces\n- Fix import paths and type exports\n- Update subscriptionsClient usage consistently\n- Migrate stores \\(auth, shorts, live-chat\\) to new API\n\nComponent Updates:\n- Replace direct API calls with TanStack Query hooks\n- Update imports across 40+ component files\n- Fix home page components \\(featured, shorts, series, creators\\)\n- Update video/shorts action buttons and comment sections\n- Migrate community components to new API\n\nDocumentation & Config:\n- Update CLAUDE.md and DESIGN_SYSTEM.md\n- Remove deprecated TABOOTV_DESIGN_SYSTEM_REFERENCE.md\n- Update package.json and tsconfig.json\n- Add PROJECT_CONTEXT.md documentation\n\nFiles affected:\n- 8 new API client files created\n- 11 new mutation/query files created\n- 70+ files migrated and fixed\n- Variable collisions fixed in 6 critical files\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit:*)",
      "Bash(wc:*)",
      "Bash(diff:*)",
      "Bash(head:*)",
      "Bash(git ls-tree:*)",
      "Bash(npm run type-check:*)",
      "Bash(npm run lint:*)",
      "mcp__ide__getDiagnostics",
      "Bash(tree:*)",
      "Bash(done)",
      "Bash(git mv:*)",
      "Bash(sips:*)",
      "Bash(pip3 install:*)",
      "Bash(brew install:*)",
      "Bash(magick:*)",
      "Bash(git restore:*)",
      "Bash(git show:*)",
      "Bash(pnpm lint:*)",
      "Bash(pnpm build:*)",
      "Bash(pnpm tsc:*)",
      "Skill(clean-code)",
      "Skill(clean-code:*)",
      "Bash(pnpm eslint:*)",
      "Skill(frontend-design)",
      "Skill(frontend-design:*)",
      "Skill(vercel-react-best-practices)",
      "Skill(vercel-react-best-practices:*)",
      "Bash(node scripts/measure-bundle.js:*)",
      "Bash(node scripts/measure-build-time.js:*)",
      "Bash(node scripts/measure-hmr.js:*)",
      "Bash(npx jscodeshift:*)",
      "Bash(chmod:*)",
      "Bash(node scripts/verify-redirects.js:*)",
      "Bash(npm run verify-redirects:*)",
      "Bash(pnpm run build:*)",
      "Bash(du:*)",
      "Skill(sync-project-docs)",
      "Skill(sync-project-docs:*)",
      "Bash(node --version:*)",
      "Bash(npm:*)",
      "Bash(act:*)",
      "Bash(gh extension:*)",
      "Bash(pnpm type-check:*)",
      "Bash(git worktree add:*)",
      "Bash(git worktree:*)",
      "Bash(git fetch:*)",
      "Bash(npx next build:*)",
      "Bash(npx next lint)",
      "Bash(npx next lint:*)",
      "Bash(node scripts/sonar-scan.mjs:*)",
      "Bash(superdesign create-project:*)",
      "Bash(superdesign create-design-draft:*)",
      "Bash(superdesign iterate-design-draft:*)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(superdesign get-design:*)",
      "Bash(npx next:*)",
      "Bash(git -C /Users/igaosoza/workspace/www/tabootv/taboo-web diff --cached)",
      "Bash(git -C /Users/igaosoza/workspace/www/tabootv/taboo-web commit -m \"$\\(cat <<''EOF''\nperf\\(firebase\\): lazy-load Firebase SDK via dynamic imports\n\nFirebase \\(~131 KB\\) was eagerly imported at module level, shipping to all\nusers even though it''s only needed for Google/Apple social login. Convert\nall imports to dynamic import\\(\\) so Firebase loads on-demand when a user\nclicks a social login button. Also removes the unused getFirebaseAnalytics\nexport.\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/igaosoza/workspace/www/tabootv/taboo-web diff --cached --stat)",
      "Bash(git -C /Users/igaosoza/workspace/www/tabootv/taboo-web commit -m \"$\\(cat <<''EOF''\nperf\\(deps\\): remove unused dayjs dependency\n\ndayjs was in dependencies but had zero imports in src/. The app uses\ndate-fns instead. Removing it saves ~7 KB from the production bundle.\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/igaosoza/workspace/www/tabootv/taboo-web add:*)",
      "Bash(git -C /Users/igaosoza/workspace/www/tabootv/taboo-web commit -m \"$\\(cat <<''EOF''\nperf\\(fonts\\): remove unused Figtree weights 300 and 900\n\nfont-light \\(300\\) and font-black \\(900\\) have zero usages across the\ncodebase. Dropping them eliminates ~2 font file downloads \\(~40-80 KB\\).\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/igaosoza/workspace/www/tabootv/taboo-web commit -m \"$\\(cat <<''EOF''\nperf\\(ux\\): add loading.tsx for 10 routes missing loading states\n\nAdd LoadingScreen boundaries for shorts, community, searches,\nnotifications, sign-in, register, forgot-password, reset-password,\nchoose-plan, and redeem. Enables React Suspense streaming so users see\ninstant loading indicators during navigation instead of a blank screen.\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/igaosoza/workspace/www/tabootv/taboo-web commit -m \"$\\(cat <<''EOF''\nperf\\(build\\): expand optimizePackageImports for better tree-shaking\n\nAdd recharts, date-fns, and all 10 Radix UI packages to\noptimizePackageImports so Next.js can tree-shake their barrel exports\nmore effectively, reducing per-page bundle sizes.\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/igaosoza/workspace/www/tabootv/taboo-web status)",
      "WebFetch(domain:posthog.com)",
      "WebSearch",
      "WebFetch(domain:github.com)",
      "Bash(npx skills:*)",
      "Bash(git -C /Users/igaosoza/workspace/www/tabootv/taboo-web show --stat bbebaa2)",
      "Bash(git -C /Users/igaosoza/workspace/www/tabootv/taboo-web ls-tree -r HEAD)",
      "Bash(git log:*)",
      "Bash(git diff:*)",
      "WebFetch(domain:p.superdesign.dev)",
      "WebFetch(domain:dev.whop.com)",
      "WebFetch(domain:docs.whop.com)",
      "WebFetch(domain:guides.whop.com)",
      "WebFetch(domain:whop.com)",
      "Bash(node:*)",
      "Bash(/Users/igaosoza/workspace/www/tabootv/taboo-web/src/app/\\\\\\(platform\\\\\\)/videos/[id]/not-found.tsx << 'ENDOFFILE'\nimport { Button } from '@/components/ui/button';\nimport { Home, PlayCircle } from 'lucide-react';\nimport Link from 'next/link';\n\nexport default function VideoNotFound\\(\\) {\n  return \\(\n    <div className=\"min-h-[60vh] flex flex-col items-center justify-center px-4 py-12\">\n      <div className=\"w-full max-w-md bg-surface border border-border rounded-xl shadow-medium p-6 sm:p-8\">\n        <div className=\"flex justify-center mb-5\">\n          <div className=\"w-12 h-12 rounded-full bg-red-muted flex items-center justify-center\">\n            <PlayCircle className=\"w-6 h-6 text-red-primary\" />\n          </div>\n        </div>\n\n        <h1 className=\"text-xl font-semibold text-text-primary text-center mb-2\">\n          Video not found\n        </h1>\n        <p className=\"text-sm text-text-secondary text-center mb-6\">\n          This video doesn&apos;t exist or may have been removed.\n        </p>\n\n        <div className=\"flex gap-3\">\n          <Button variant=\"destructive\" className=\"flex-1 gap-2\" asChild>\n            <Link href=\"/\">\n              <Home className=\"w-4 h-4\" />\n              Back to Home\n            </Link>\n          </Button>\n          <Button variant=\"outline\" className=\"flex-1 gap-2\" asChild>\n            <Link href=\"/explore\">\n              <PlayCircle className=\"w-4 h-4\" />\n              Explore Videos\n            </Link>\n          </Button>\n        </div>\n      </div>\n    </div>\n  \\);\n}\nENDOFFILE)",
      "Bash(git status:*)"
    ],
    "deny": [],
    "ask": []
  },
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": ["playwright-test"],
  "hooks": {
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "echo 'Remember: For any code-related work, apply these skills in order: (1) /vercel-react-best-practices (2) /web-performance-optimization (3) /sonar-scan after completing code changes.'"
          }
        ]
      }
    ]
  }
}
